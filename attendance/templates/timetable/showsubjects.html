{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}
    <title>SAMS</title>
{% endblock %}
    
{% block content %}
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Days/Hour</td>
                <th>I</td>
                <th>II</td>
                <th>III</td>
                <th>IV</td>
                <th>V</td>
            </tr>
        </thead>
        <tbody>
            {% for i,days in all_subjects %}
            <tr>
                <th>{{days}}</th>
                {% for j in i %}
                    <td id="{{forloop.parentloop.counter}}{{forloop.counter}}">{{j}}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="modal" id="timetable_modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4>Create/Edit a subject</h4>
                </div>
                <div class="modal-body">
                    <form method="POST" action="#">
                        {% csrf_token %}
                        {{t_form_object.as_p}}
                        <input type="submit" value="Submit">
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function(){
            $("td").click(function(){
                var hour=$(this).attr('id')
                var day=hour[0]
                hour=hour[1]
                $("#id_day").val(day)
                //Here day and hour are strings but the options are integers.Here implicit type conversion is performed to convert string to integer
                $("#id_hour").val(hour) 
                var a=$(this).text()
                if(a != "Free"){
                   var subject=$(this).text()
                   console.log(subject)
                   $("#id_subject").val(subject)
                }
                $("#timetable_modal").modal('show')
            })
        })
    </script>
{% endblock %}
    